{
  "version": 3,
  "sources": ["../../../src/controllers/Auth/index.ts"],
  "sourcesContent": ["import { AuthService } from \"../../services/Auth\";\nimport { Request, Response } from \"express-serve-static-core\";\nimport { logger } from \"../../helpers/Log\";\nimport ErrorFormatter from \"../../helpers/Response/ErrorFormatter\";\nimport SuccessSingularFormatter from '../../helpers/Response/SuccessSingularFormatter';\nimport { LoginRequest } from '../../domains/web/Auth/LoginRequest';\nimport { ValidationException, Validator } from '../../helpers/Validator';\nimport { BadRequestError } from \"../../helpers/Error/BadRequestError\";\nimport { RegisterRequest } from \"../../domains/web/Auth/RegisterRequest\";\nimport { HandleErrorResponse } from \"../../helpers/Error/HandleErrorResponse\";\nimport { EditDeviceTokenRequest } from \"../../domains/web/Auth/EditDeviceTokenRequest\";\nimport { EditProfileRequest } from \"../../domains/web/Auth/EditProfileRequest\";\n\nexport class AuthController {\n    authService: AuthService\n\n    constructor(authService: AuthService){\n        this.authService = authService\n    }\n\n    async LoginController(req: Request, res: Response) {\n      try {\n        const data = req.body as LoginRequest;\n        const validatedData = Validator.validate(data, LoginRequest.getSchema());\n        const result = await this.authService.SignInService(validatedData);\n\n        const response = SuccessSingularFormatter('Berhasil Login', { token: result });\n\n        return res.status(200).send(response);\n\n      } catch (error: any) {\n        return HandleErrorResponse(res, error);\n      } \n    }\n\n    async ProfileController(req: Request, res: Response) {\n      try {\n        const result = await this.authService.GetProfileService(req.authId);\n\n        const response = SuccessSingularFormatter('Profile User', result);\n\n        return res.status(200).send(response);\n\n      } catch (error: any) {\n        return HandleErrorResponse(res, error);\n      } \n    }\n\n    async ChangeDeviceTokenController(req: Request, res: Response){\n      try {\n        const data = req.body as EditDeviceTokenRequest;\n        const validatedData = Validator.validate(data, EditDeviceTokenRequest.getSchema());\n        const result = await this.authService.ChangeDeviceTokenService(validatedData, req.authId);\n\n        const response = SuccessSingularFormatter('Berhasil Ganti Device Token', result);\n\n        return res.status(200).send(response);\n\n      } catch (error) {\n        return HandleErrorResponse(res, error);\n      }\n    }\n\n    async ChangeProfileController(req: Request, res: Response){\n      try {\n        const data = req.body as EditProfileRequest;\n        const validatedData = Validator.validate(data, EditProfileRequest.getSchema());\n        const result = await this.authService.ChangeProfileService(validatedData, req.authId);\n\n        const response = SuccessSingularFormatter('Berhasil Ganti Profile', result);\n        return res.status(200).send(response);\n\n      } catch (error) {\n        return HandleErrorResponse(res, error);\n      }\n    }\n\n\n    async RegisterController(req: Request, res: Response){\n      try {\n        const data = req.body as RegisterRequest;\n        const validatedData = Validator.validate(data, RegisterRequest.getSchema());\n        const result = await this.authService.RegisterService(validatedData);\n\n        const response = SuccessSingularFormatter('Berhasil Register Akun', result );\n\n        return res.status(200).send(response);\n\n      } catch (error) {\n        return HandleErrorResponse(res, error);\n      }\n    }\n  \n\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,sCAAqC;AACrC,0BAA6B;AAC7B,uBAA+C;AAE/C,6BAAgC;AAChC,iCAAoC;AACpC,oCAAuC;AACvC,gCAAmC;AAE5B,MAAM,eAAe;AAAA,EACxB;AAAA,EAEA,YAAY,aAAyB;AACjC,SAAK,cAAc;AAAA,EACvB;AAAA,EAEA,MAAM,gBAAgB,KAAc,KAAe;AACjD,QAAI;AACF,YAAM,OAAO,IAAI;AACjB,YAAM,gBAAgB,2BAAU,SAAS,MAAM,iCAAa,UAAU,CAAC;AACvE,YAAM,SAAS,MAAM,KAAK,YAAY,cAAc,aAAa;AAEjE,YAAM,eAAW,gCAAAA,SAAyB,kBAAkB,EAAE,OAAO,OAAO,CAAC;AAE7E,aAAO,IAAI,OAAO,GAAG,EAAE,KAAK,QAAQ;AAAA,IAEtC,SAAS,OAAY;AACnB,iBAAO,gDAAoB,KAAK,KAAK;AAAA,IACvC;AAAA,EACF;AAAA,EAEA,MAAM,kBAAkB,KAAc,KAAe;AACnD,QAAI;AACF,YAAM,SAAS,MAAM,KAAK,YAAY,kBAAkB,IAAI,MAAM;AAElE,YAAM,eAAW,gCAAAA,SAAyB,gBAAgB,MAAM;AAEhE,aAAO,IAAI,OAAO,GAAG,EAAE,KAAK,QAAQ;AAAA,IAEtC,SAAS,OAAY;AACnB,iBAAO,gDAAoB,KAAK,KAAK;AAAA,IACvC;AAAA,EACF;AAAA,EAEA,MAAM,4BAA4B,KAAc,KAAc;AAC5D,QAAI;AACF,YAAM,OAAO,IAAI;AACjB,YAAM,gBAAgB,2BAAU,SAAS,MAAM,qDAAuB,UAAU,CAAC;AACjF,YAAM,SAAS,MAAM,KAAK,YAAY,yBAAyB,eAAe,IAAI,MAAM;AAExF,YAAM,eAAW,gCAAAA,SAAyB,+BAA+B,MAAM;AAE/E,aAAO,IAAI,OAAO,GAAG,EAAE,KAAK,QAAQ;AAAA,IAEtC,SAAS,OAAO;AACd,iBAAO,gDAAoB,KAAK,KAAK;AAAA,IACvC;AAAA,EACF;AAAA,EAEA,MAAM,wBAAwB,KAAc,KAAc;AACxD,QAAI;AACF,YAAM,OAAO,IAAI;AACjB,YAAM,gBAAgB,2BAAU,SAAS,MAAM,6CAAmB,UAAU,CAAC;AAC7E,YAAM,SAAS,MAAM,KAAK,YAAY,qBAAqB,eAAe,IAAI,MAAM;AAEpF,YAAM,eAAW,gCAAAA,SAAyB,0BAA0B,MAAM;AAC1E,aAAO,IAAI,OAAO,GAAG,EAAE,KAAK,QAAQ;AAAA,IAEtC,SAAS,OAAO;AACd,iBAAO,gDAAoB,KAAK,KAAK;AAAA,IACvC;AAAA,EACF;AAAA,EAGA,MAAM,mBAAmB,KAAc,KAAc;AACnD,QAAI;AACF,YAAM,OAAO,IAAI;AACjB,YAAM,gBAAgB,2BAAU,SAAS,MAAM,uCAAgB,UAAU,CAAC;AAC1E,YAAM,SAAS,MAAM,KAAK,YAAY,gBAAgB,aAAa;AAEnE,YAAM,eAAW,gCAAAA,SAAyB,0BAA0B,MAAO;AAE3E,aAAO,IAAI,OAAO,GAAG,EAAE,KAAK,QAAQ;AAAA,IAEtC,SAAS,OAAO;AACd,iBAAO,gDAAoB,KAAK,KAAK;AAAA,IACvC;AAAA,EACF;AAGJ;",
  "names": ["SuccessSingularFormatter"]
}
