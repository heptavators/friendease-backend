{
  "version": 3,
  "sources": ["../../../src/helpers/Validator/index.ts"],
  "sourcesContent": ["import { Schema, ValidationErrorItem } from \"joi\";\r\n\r\nexport class ValidationException extends Error {\r\n  errors: Array<{ error: string; message: string }>;\r\n  status: number;\r\n\r\n  constructor(errors: Array<{ error: string; message: string }>, status: number) {\r\n    super('Validation failed');\r\n    this.errors = errors;\r\n    this.status = status;\r\n    this.message = JSON.stringify(errors);\r\n  }\r\n\r\n  toResponseObject() {\r\n    return {\r\n      errors: this.errors.map(({ error, message }) => ({ error, message })),\r\n    };\r\n  }\r\n}\r\n\r\nexport class Validator {\r\n  static validate<T>(data: T, schema: Schema<T>): T {\r\n    const { error } = schema.validate(data, { abortEarly: false });\r\n\r\n    if (error) {\r\n      const errors: Array<{ error: string; message: string }> = [];\r\n\r\n      error.details.forEach((detail: ValidationErrorItem) => {\r\n        if (detail.context && detail.context.key) {\r\n          const key = detail.context.key;\r\n          errors.push({ error: key, message: detail.message });\r\n        }\r\n      });\r\n      throw new ValidationException(errors, 422);\r\n\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,MAAM,4BAA4B,MAAM;AAAA,EAC7C;AAAA,EACA;AAAA,EAEA,YAAY,QAAmD,QAAgB;AAC7E,UAAM,mBAAmB;AACzB,SAAK,SAAS;AACd,SAAK,SAAS;AACd,SAAK,UAAU,KAAK,UAAU,MAAM;AAAA,EACtC;AAAA,EAEA,mBAAmB;AACjB,WAAO;AAAA,MACL,QAAQ,KAAK,OAAO,IAAI,CAAC,EAAE,OAAO,QAAQ,OAAO,EAAE,OAAO,QAAQ,EAAE;AAAA,IACtE;AAAA,EACF;AACF;AAEO,MAAM,UAAU;AAAA,EACrB,OAAO,SAAY,MAAS,QAAsB;AAChD,UAAM,EAAE,MAAM,IAAI,OAAO,SAAS,MAAM,EAAE,YAAY,MAAM,CAAC;AAE7D,QAAI,OAAO;AACT,YAAM,SAAoD,CAAC;AAE3D,YAAM,QAAQ,QAAQ,CAAC,WAAgC;AACrD,YAAI,OAAO,WAAW,OAAO,QAAQ,KAAK;AACxC,gBAAM,MAAM,OAAO,QAAQ;AAC3B,iBAAO,KAAK,EAAE,OAAO,KAAK,SAAS,OAAO,QAAQ,CAAC;AAAA,QACrD;AAAA,MACF,CAAC;AACD,YAAM,IAAI,oBAAoB,QAAQ,GAAG;AAAA,IAE3C;AAEA,WAAO;AAAA,EACT;AACF;",
  "names": []
}
