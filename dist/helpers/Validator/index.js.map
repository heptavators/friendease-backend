{
  "version": 3,
  "sources": ["../../../src/helpers/Validator/index.ts"],
  "sourcesContent": ["import Joi, { Schema, ValidationErrorItem } from \"joi\";\r\n\r\nexport class ValidationException extends Error {\r\n    errors: Array<{ error: string; message: string; code: number }>;\r\n    status: number;\r\n  \r\n    constructor(errors: Array<{ error: string; message: string; code: number }>, status: number = 400) {\r\n      super('Validation failed');\r\n      this.errors = errors;\r\n      this.status = status;  \r\n      this.message = JSON.stringify(errors); \r\n    }\r\n  }\r\n  \r\n  export class Validator {\r\n    static validate<T>(data: T, schema: Schema<T>): T {\r\n      const { error } = schema.validate(data, { abortEarly: false });\r\n  \r\n      if (error) {\r\n        const errors: Array<{ error: string; message: string; code: number }> = [];\r\n  \r\n        error.details.forEach((detail: ValidationErrorItem) => {\r\n          if (detail.context && detail.context.key) {\r\n            const key = detail.context.key;\r\n            errors.push({ error: key, message: detail.message, code: 422 });\r\n          }\r\n        });\r\n  \r\n        throw new ValidationException(errors);\r\n      }\r\n  \r\n      return data;\r\n    }\r\n  }\r\n  "],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,MAAM,4BAA4B,MAAM;AAAA,EAC3C;AAAA,EACA;AAAA,EAEA,YAAY,QAAiE,SAAiB,KAAK;AACjG,UAAM,mBAAmB;AACzB,SAAK,SAAS;AACd,SAAK,SAAS;AACd,SAAK,UAAU,KAAK,UAAU,MAAM;AAAA,EACtC;AACF;AAEO,MAAM,UAAU;AAAA,EACrB,OAAO,SAAY,MAAS,QAAsB;AAChD,UAAM,EAAE,MAAM,IAAI,OAAO,SAAS,MAAM,EAAE,YAAY,MAAM,CAAC;AAE7D,QAAI,OAAO;AACT,YAAM,SAAkE,CAAC;AAEzE,YAAM,QAAQ,QAAQ,CAAC,WAAgC;AACrD,YAAI,OAAO,WAAW,OAAO,QAAQ,KAAK;AACxC,gBAAM,MAAM,OAAO,QAAQ;AAC3B,iBAAO,KAAK,EAAE,OAAO,KAAK,SAAS,OAAO,SAAS,MAAM,IAAI,CAAC;AAAA,QAChE;AAAA,MACF,CAAC;AAED,YAAM,IAAI,oBAAoB,MAAM;AAAA,IACtC;AAEA,WAAO;AAAA,EACT;AACF;",
  "names": []
}
